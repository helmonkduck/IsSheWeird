<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Home - Classroom</title>

<link rel="icon" type="image/x-icon" href="gc.ico">

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
  --bg: #0e0e0e;
  --panel: #1a1a1a;
  --text: #f2f2f2;
  --accent: #4cafef;
  --muted: #888;
}

* {
  box-sizing: border-box;
  font-family: system-ui, sans-serif;
}

body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
}

header {
  padding: 1rem;
  background: var(--panel);
  display: flex;
  gap: 1rem;
  align-items: center;
}

header h1 {
  margin: 0;
  font-size: 1.4rem;
}

#search {
  margin-left: auto;
  padding: 0.5rem;
  background: #111;
  border: 1px solid #333;
  color: var(--text);
}

main {
  padding: 1rem;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 1rem;
}

.game {
  background: var(--panel);
  padding: 1rem;
  border-radius: 8px;
  cursor: pointer;
  position: relative;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.game:hover {
  outline: 2px solid var(--accent);
}

.thumbnail {
  width: 100%;
  aspect-ratio: 16 / 9;
  border-radius: 6px;
  overflow: hidden;
  background: #111;
  display: flex;
  align-items: center;
  justify-content: center;
}

.thumbnail img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.game h3 {
  margin: 0 0 0.5rem;
}

.favorite {
  position: absolute;
  top: 8px;
  right: 8px;
  font-size: 1.2rem;
  color: var(--muted);
}

.favorite.active {
  color: gold;
}

#player {
  position: fixed;
  inset: 0;
  background: black;
  display: none;
  flex-direction: column;
}

#player iframe {
  flex: 1;
  border: none;
}

#closeBtn {
  padding: 0.75rem;
  background: var(--panel);
  color: var(--text);
  border: none;
  cursor: pointer;
}
</style>
</head>

<body>

<header>
  <h1>ðŸŽ® Game Center</h1>
  <input id="search" placeholder="Search games...">
</header>

<main id="gameList"></main>

<div id="player">
  <button id="closeBtn">â¬… Back to Hub</button>
  <iframe id="gameFrame" allowfullscreen></iframe>
</div>

<script>
const games = [
  { id: "3dcity", name: "3D City", file: "games/3d.city-gh-pages/index.html", thumbnail: "games/3d.city-gh-pages/tn.jpeg" },
  { id: "stc", name: "Sort The Court", file: "games/sort-the-court/index.html", thumbnail: "games/sort-the-court/tn.png" },
  { id: "scritchyscrathcy", name: "Scritchy Scratchy", file: "games/scritchy-scratchy/index.html", thumbnail: "games/scritchy-scratchy/tn.png" }
];

const gameList = document.getElementById("gameList");
const search = document.getElementById("search");
const player = document.getElementById("player");
const frame = document.getElementById("gameFrame");

const favorites = JSON.parse(localStorage.getItem("favorites") || "[]");

function saveFavorites() {
  localStorage.setItem("favorites", JSON.stringify(favorites));
}

function render() {
  gameList.innerHTML = "";

  const q = search.value.toLowerCase();

  games
    .filter(g => g.name.toLowerCase().includes(q))
    .sort((a, b) =>
      favorites.includes(b.id) - favorites.includes(a.id)
    )
    .forEach(game => {
      const div = document.createElement("div");
      div.className = "game";

      const thumbnail = document.createElement("div");
      thumbnail.className = "thumbnail";
      if (game.thumbnail) {
        const img = document.createElement("img");
        img.src = game.thumbnail;
        img.alt = `${game.name} thumbnail`;
        img.loading = "lazy";
        thumbnail.appendChild(img);
      }

      const fav = document.createElement("div");
      fav.className = "favorite";
      fav.innerHTML = favorites.includes(game.id) ? "â˜…" : "â˜†";
      fav.classList.toggle("active", favorites.includes(game.id));

      fav.onclick = e => {
        e.stopPropagation();
        if (favorites.includes(game.id)) {
          favorites.splice(favorites.indexOf(game.id), 1);
        } else {
          favorites.push(game.id);
        }
        saveFavorites();
        render();
      };

      div.appendChild(thumbnail);
      const title = document.createElement("h3");
      title.textContent = game.name;
      div.appendChild(title);
      div.appendChild(fav);

      div.onclick = () => openGame(game.file);

      gameList.appendChild(div);
    });
}

function openGame(file) {
  frame.src = file;
  player.style.display = "flex";
  document.documentElement.requestFullscreen?.();
}

document.getElementById("closeBtn").onclick = () => {
  frame.src = "";
  player.style.display = "none";
  document.exitFullscreen?.();
};

search.oninput = render;

render();
</script>

</body>
</html>
